{"remainingRequest":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Desktop/gitlab/image-hotpot/src/components/HotspotImage/Main/OperationFloor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/Desktop/gitlab/image-hotpot/src/components/HotspotImage/Main/OperationFloor.vue","mtime":1628479317920},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js","mtime":1628478904830},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1628478909545}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport AreaBox from \"./AreaBox\";\n\nexport default {\n  name: \"OperationFloor\",\n  components: {\n    AreaBox,\n  },\n  data() {\n    return {\n      starX: 0,\n      // endX: 0,\n      starY: 0,\n      // endY: 0,\n      areaWidth: 0,\n      areaHeight: 0,\n      caseShow: false,\n      nowImgWidth: null,\n      areaData: [],\n    };\n  },\n  mounted() {\n    // 显示之前添加的热区\n    const areaData = JSON.parse(localStorage.getItem(\"areaData\"));\n    if (areaData && areaData.length) {\n      this.areaData = areaData;\n    }\n  },\n  methods: {\n    // 绘画热区开始\n    mouseDown(e) {\n      this.caseShow = true;\n      // 记录滑动的初始值\n      this.starX = e.layerX;\n      this.starY = e.layerY;\n      // 鼠标滑动的过程\n      if (!document.onmousemove) {\n        document.onmousemove = (ev) => {\n          this.areaWidth = ev.layerX - this.starX;\n          this.areaHeight = ev.layerY - this.starY;\n        };\n      }\n    },\n    // 绘画热区结束\n    changeStop() {\n      document.onmousemove = null;\n      if (this.caseShow && this.areaWidth > 10 && this.areaHeight > 10) {\n        const data = {\n          starX: this.starX,\n          starY: this.starY,\n          areaWidth: this.areaWidth,\n          areaHeight: this.areaHeight,\n          nowImgWidth: this.$refs.backgroundImg.width,\n          url: null,\n          target: \"_self\",\n        };\n        this.areaData.push(data);\n        // console.log(this.areaData)\n      }\n      // 初始化绘图\n      this.caseShow = false;\n      this.starX = 0;\n      this.starY = 0;\n      this.areaWidth = 0;\n      this.areaHeight = 0;\n    },\n    // 删除指定热区\n    DelAreaBox(id) {\n      this.areaData.splice(id, 1);\n    },\n    // 添加网址\n    addURL(id, urlData) {\n      this.areaData[id].url = urlData.url;\n      this.areaData[id].target = urlData.select;\n      this.$message.success(\"添加成功\");\n      console.log(this.areaData);\n    },\n    // 保存热区信息\n    saveAreaData() {\n      if (this.areaData === []) {\n        this.$message.error(\"没有可保存的信息\");\n      } else {\n        localStorage.setItem(\"areaData\", JSON.stringify(this.areaData));\n        this.$message.success(\"保存成功\");\n        // console.log(this.areaData)\n      }\n    },\n    // 清除热区信息\n    clearHotSpotInfo() {\n      localStorage.removeItem(\"areaData\");\n      this.areaData = [];\n    },\n  },\n};\n",{"version":3,"sources":["OperationFloor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OperationFloor.vue","sourceRoot":"src/components/HotspotImage/Main","sourcesContent":["<template>\n  <div class=\"operationFloor\">\n    <div class=\"imgBox\" @mouseup.left.stop=\"changeStop()\">\n      <div class=\"container\">\n        <img\n          ref=\"backgroundImg\"\n          src=\"../../../assets/hotAreaImage.png\"\n          ondragstart=\"return false;\"\n          oncontextmenu=\"return false;\"\n          onselect=\"document.selection.empty();\"\n          alt=\"\"\n          @mousedown.left.stop=\"mouseDown($event)\"\n        />\n        <!--绘制的热区-->\n        <div\n          v-show=\"caseShow\"\n          class=\"area\"\n          :style=\"{\n            width: areaWidth + 'px',\n            height: areaHeight + 'px',\n            left: starX + 'px',\n            top: starY + 'px',\n          }\"\n        />\n        <!--已有的热区-->\n        <AreaBox\n          v-for=\"(item, index) in areaData\"\n          :id=\"index\"\n          :key=\"index\"\n          :area-init.sync=\"item\"\n          @DelAreaBox=\"DelAreaBox\"\n          @addURL=\"addURL\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AreaBox from \"./AreaBox\";\n\nexport default {\n  name: \"OperationFloor\",\n  components: {\n    AreaBox,\n  },\n  data() {\n    return {\n      starX: 0,\n      // endX: 0,\n      starY: 0,\n      // endY: 0,\n      areaWidth: 0,\n      areaHeight: 0,\n      caseShow: false,\n      nowImgWidth: null,\n      areaData: [],\n    };\n  },\n  mounted() {\n    // 显示之前添加的热区\n    const areaData = JSON.parse(localStorage.getItem(\"areaData\"));\n    if (areaData && areaData.length) {\n      this.areaData = areaData;\n    }\n  },\n  methods: {\n    // 绘画热区开始\n    mouseDown(e) {\n      this.caseShow = true;\n      // 记录滑动的初始值\n      this.starX = e.layerX;\n      this.starY = e.layerY;\n      // 鼠标滑动的过程\n      if (!document.onmousemove) {\n        document.onmousemove = (ev) => {\n          this.areaWidth = ev.layerX - this.starX;\n          this.areaHeight = ev.layerY - this.starY;\n        };\n      }\n    },\n    // 绘画热区结束\n    changeStop() {\n      document.onmousemove = null;\n      if (this.caseShow && this.areaWidth > 10 && this.areaHeight > 10) {\n        const data = {\n          starX: this.starX,\n          starY: this.starY,\n          areaWidth: this.areaWidth,\n          areaHeight: this.areaHeight,\n          nowImgWidth: this.$refs.backgroundImg.width,\n          url: null,\n          target: \"_self\",\n        };\n        this.areaData.push(data);\n        // console.log(this.areaData)\n      }\n      // 初始化绘图\n      this.caseShow = false;\n      this.starX = 0;\n      this.starY = 0;\n      this.areaWidth = 0;\n      this.areaHeight = 0;\n    },\n    // 删除指定热区\n    DelAreaBox(id) {\n      this.areaData.splice(id, 1);\n    },\n    // 添加网址\n    addURL(id, urlData) {\n      this.areaData[id].url = urlData.url;\n      this.areaData[id].target = urlData.select;\n      this.$message.success(\"添加成功\");\n      console.log(this.areaData);\n    },\n    // 保存热区信息\n    saveAreaData() {\n      if (this.areaData === []) {\n        this.$message.error(\"没有可保存的信息\");\n      } else {\n        localStorage.setItem(\"areaData\", JSON.stringify(this.areaData));\n        this.$message.success(\"保存成功\");\n        // console.log(this.areaData)\n      }\n    },\n    // 清除热区信息\n    clearHotSpotInfo() {\n      localStorage.removeItem(\"areaData\");\n      this.areaData = [];\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\" ref=\"stylesheet/scss\">\n.operationFloor {\n  position: relative;\n  .header {\n    .titleBox {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      height: 100px;\n      .name {\n        font-size: 13px;\n        font-weight: bold;\n      }\n    }\n    .textBox {\n      font-size: 12px;\n      color: #777;\n      margin-bottom: 10px;\n    }\n  }\n  .imgBox {\n    display: flex;\n    justify-content: center;\n    .container {\n      position: relative;\n      overflow: hidden;\n    }\n    img {\n      cursor: crosshair;\n    }\n    .area {\n      position: absolute;\n      width: 200px;\n      height: 200px;\n      left: 200px;\n      top: 300px;\n      background: rgba(#2980b9, 0.3);\n      border: 1px dashed #34495e;\n    }\n  }\n}\n</style>\n"]}]}