{"remainingRequest":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Desktop/gitlab/image-hotpot/src/components/plugin/element/table/el-table-select.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/Desktop/gitlab/image-hotpot/src/components/plugin/element/table/el-table-select.vue","mtime":1628478882845},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js","mtime":1628478904830},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1628478909545}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'ElTableSelect',\n  props: {\n    /*\n    * 表格\n    * */\n    // 表格展示列\n    columns: {\n      type: Array,\n      required: true\n    },\n    // 表格数据\n    data: {\n      type: Array,\n      required: true\n    },\n    // 是否显示多选列\n    isSelection: {\n      type: Boolean,\n      default: false\n    },\n    // 操作组\n    // 自定义按钮{icon: '图标', btnType: '按钮类型', handler: '执行的方法', buttonName: '按钮名字',condition: {} 显示判别值}\n    operation: {\n      type: Array,\n      default: () => []\n    },\n    // 传入自定义按钮时，需要延展宽度的最大值\n    operationCustomLength: {\n      type: Number,\n      default: 0\n    },\n    // 回显判别值的name\n    judgeValue: {\n      required: true,\n      type: String\n    },\n\n    /*\n    * 分页\n    * */\n    // 是否显示\n    isPagination: {\n      type: Boolean,\n      default: true\n    },\n    total: {\n      type: Number,\n      default: 0\n    },\n    // 当前页面\n    currentPage: {\n      type: Number,\n      default: 1\n    },\n    // 自定义每页面数量组\n    pageSizes: {\n      type: Array,\n      default: () => [10, 20, 50, 100]\n    },\n    // 每页面数量\n    pageSize: {\n      type: Number,\n      default: 10\n    },\n    // total 数据总量, sizes 每页面数量组, prev 上一页, pager, next 下一页, jumper 页面跳转\n    layout: {\n      type: String,\n      default: 'prev, pager, next, jumper'\n    }\n  },\n  data() {\n    return {\n      getRowKeys(row) {\n        return row.index\n      },\n      cacheCurrentPage: 1,\n      cacheSelectData: []\n    }\n  },\n  computed: {\n    // 操作按钮的宽度自适应\n    fixedWidth() {\n      return this.operationCustomLength ? this.operationCustomLength * 110 - 5 : this.operation.length * 110 - 5\n    }\n  },\n  mounted() {\n    this.cacheCurrentPage = this.currentPage\n  },\n  methods: {\n    /*\n    * 表格\n    * */\n    // 筛选行的操作\n    operationGroup(affix) {\n      if (affix === 'custom') {\n        // 自定义列表\n        this.customList = this.operation.filter(n => {\n          return typeof n === 'object'\n        })\n        return this.customList\n      } else {\n        // 固定\n        return this.operation.indexOf(affix) >= 0\n      }\n    },\n    // 自定义事件触发\n    handleCustom(index, row, handler) {\n      this.$emit(handler, index, row)\n    },\n    // 编辑事件\n    handleEdit(index, row) {\n      this.$emit('handleEdit', index, row)\n    },\n    // 插入事件\n    handleInsert(index, row) {\n      this.$emit('handleInsert', index, row)\n    },\n    // 删除事件\n    handleDelete(index, row) {\n      this.$confirm('确认删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$emit('handleDelete', index, row)\n      })\n    },\n    // 查看事件\n    handleCheck(index, row) {\n      this.$emit('handleCheck', index, row)\n    },\n    // 选中改变事件\n    handleSelectionChange(val) {\n      this.$emit('handleSelectionChange', val)\n    },\n    // 单个选中事件\n    handleSelect(list) {\n      this.cacheSelectData[this.cacheCurrentPage] = list\n      this.$emit('handleSelect', list)\n    },\n    // 全选事件\n    handleSelectAll(list) {\n      // 防止指针错乱\n      this.cacheSelectData[this.cacheCurrentPage] = list.length ? list : null\n      this.$emit('handleSelect', list)\n    },\n    // 单行选中\n    setSelection(row, bool) {\n      this.$refs.tableGroup.toggleRowSelection(row, bool)\n    },\n    // 清空选中\n    clearSelection() {\n      this.$refs.tableGroup.clearSelection()\n    },\n    // 分页选择回显\n    echoSelection(currentPageSelectList) {\n      if (currentPageSelectList) {\n        const _list = this.data.filter(row => {\n          return currentPageSelectList.some(item => {\n            return item[this.judgeValue] === row[this.judgeValue]\n          })\n        })\n        _list.forEach(row => {\n          this.setSelection(row)\n          // or\n          // this.$refs.tableGroup.toggleRowSelection(row)\n        })\n      }\n    },\n\n    /*\n    * 分页\n    * */\n    handleSizeChange(num) {\n      this.$emit('handleSizeChange', num)\n    },\n    handleCurrentChange(page) {\n      this.$emit('handleCurrentChange', page)\n      this.cacheCurrentPage = page\n      // 等待表格数据回显\n      setTimeout(() => {\n        this.echoSelection(this.cacheSelectData[page])\n      }, 500)\n    },\n\n    /*\n    * 按钮\n    * */\n    // 确定\n    handleConfirm() {\n      // 所有选中的数据\n      const _AllSelectData = [].concat(...this.cacheSelectData).filter((item) => {\n        return item !== null && typeof item === 'object'\n      })\n      this.$emit('handleConfirm', _AllSelectData)\n      this.cacheSelectData = []\n      this.clearSelection()\n    },\n    // 取消\n    handleCancel() {\n      this.cacheSelectData = []\n      this.$emit('handleCancel')\n      this.clearSelection()\n    }\n  }\n}\n",{"version":3,"sources":["el-table-select.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"el-table-select.vue","sourceRoot":"src/components/plugin/element/table","sourcesContent":["<!--\n@Description: 封装element table select组件\n@Last-edit-date: 2019.11.16\n@Easy o.o <<<<<<<\n<ElTableSelect\n  :columns=\"tableColumns\"\n  :data=\"tableData\"\n  :operation=\"['check']\"\n  :is-selection=\"true\"\n  :page-size=\"5\"\n  :total=\"total\"\n  :judgeValue=\"'index'\"\n  @handleCurrentChange=\"handleCurrentChange\"\n  @handleConfirm=\"handleConfirm\"\n  @handleCancel=\"handleCancel\"\n/>\n-->\n<template>\n  <section class=\"el-table-container\">\n    <el-table\n      ref=\"tableGroup\"\n      :data=\"data\"\n      :highlight-current-row=\"true\"\n      :row-key=\"getRowKeys\"\n      border\n      stripe\n      size=\"small\"\n      style=\"width: 100%\"\n      @selection-change=\"handleSelectionChange\"\n      @select=\"handleSelect\"\n      @select-all=\"handleSelectAll\"\n    >\n      <!--多选列-->\n      <el-table-column\n        v-if=\"isSelection\"\n        type=\"selection\"\n        align=\"center\"\n        width=\"55\"\n      />\n\n      <!-- 展示列 -->\n      <template v-for=\"(column, index) in columns\">\n        <slot\n          v-if=\"column.slotName\"\n          :name=\"column.slotName\"\n        />\n        <component\n          :is=\"column.component\"\n          v-if=\"column.component\"\n          :key=\"index\"\n          :params=\"column.params\"\n        />\n        <el-table-column\n          v-if=\"column.prop\"\n          :key=\"index\"\n          :label=\"column.label\"\n          :prop=\"column.prop\"\n          :width=\"column.width\"\n          :class-name=\"column.className\"\n          align=\"center\"\n        />\n      </template>\n\n      <!-- 操作列 -->\n      <el-table-column\n        :width=\"fixedWidth\"\n        label=\"操作\"\n        fixed=\"right\"\n        align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button v-if=\"operationGroup('edit')\" icon=\"el-icon-edit\" type=\"success\" size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">\n            编辑\n          </el-button>\n          <el-button v-if=\"operationGroup('insert')\" icon=\"el-icon-plus\" size=\"mini\" @click=\"handleInsert(scope.$index, scope.row)\">\n            增加\n          </el-button>\n          <el-button v-if=\"operationGroup('delete')\" icon=\"el-icon-close\" type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.$index, scope.row)\">\n            删除\n          </el-button>\n          <el-button v-if=\"operationGroup('check')\" icon=\"el-icon-info\" type=\"info\" size=\"mini\" @click=\"handleCheck(scope.$index, scope.row)\">\n            查看\n          </el-button>\n          <!-- 自定义按钮 -->\n          <span\n            v-if=\"operationGroup('custom')\"\n            style=\"display:inline-block;\"\n          >\n            <!--eslint-disable-->\n            <el-button\n              v-for=\"(i,index) in customList\"\n              v-if=\"!i.condition || i.condition.value.indexOf(scope.row[i.condition.key]) >= 0\"\n              :key=\"index\"\n              :icon=\"i.icon\"\n              :type=\"i.btnType\"\n              size=\"mini\"\n              @click=\"handleCustom(scope.$index, scope.row, i.handler)\"\n            >\n              {{ i.buttonName }}\n            </el-button>\n          </span>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-pagination\n      v-if=\"isPagination\"\n      background\n      :current-page=\"currentPage\"\n      :page-sizes=\"pageSizes\"\n      :page-size=\"pageSize\"\n      :layout=\"layout\"\n      :total=\"total\"\n      class=\"el-pagination-c\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n    />\n\n    <el-row class=\"el-row-select\">\n      <el-col :offset=\"18\" :span=\"3\" class=\"el-col-select\">\n        <el-button type=\"primary\" size=\"small\" @click=\"handleConfirm\">确定</el-button>\n      </el-col>\n      <el-col :span=\"3\" class=\"el-col-select\">\n        <el-button size=\"small\" @click=\"handleCancel\">取消</el-button>\n      </el-col>\n    </el-row>\n  </section>\n</template>\n\n<script>\nexport default {\n  name: 'ElTableSelect',\n  props: {\n    /*\n    * 表格\n    * */\n    // 表格展示列\n    columns: {\n      type: Array,\n      required: true\n    },\n    // 表格数据\n    data: {\n      type: Array,\n      required: true\n    },\n    // 是否显示多选列\n    isSelection: {\n      type: Boolean,\n      default: false\n    },\n    // 操作组\n    // 自定义按钮{icon: '图标', btnType: '按钮类型', handler: '执行的方法', buttonName: '按钮名字',condition: {} 显示判别值}\n    operation: {\n      type: Array,\n      default: () => []\n    },\n    // 传入自定义按钮时，需要延展宽度的最大值\n    operationCustomLength: {\n      type: Number,\n      default: 0\n    },\n    // 回显判别值的name\n    judgeValue: {\n      required: true,\n      type: String\n    },\n\n    /*\n    * 分页\n    * */\n    // 是否显示\n    isPagination: {\n      type: Boolean,\n      default: true\n    },\n    total: {\n      type: Number,\n      default: 0\n    },\n    // 当前页面\n    currentPage: {\n      type: Number,\n      default: 1\n    },\n    // 自定义每页面数量组\n    pageSizes: {\n      type: Array,\n      default: () => [10, 20, 50, 100]\n    },\n    // 每页面数量\n    pageSize: {\n      type: Number,\n      default: 10\n    },\n    // total 数据总量, sizes 每页面数量组, prev 上一页, pager, next 下一页, jumper 页面跳转\n    layout: {\n      type: String,\n      default: 'prev, pager, next, jumper'\n    }\n  },\n  data() {\n    return {\n      getRowKeys(row) {\n        return row.index\n      },\n      cacheCurrentPage: 1,\n      cacheSelectData: []\n    }\n  },\n  computed: {\n    // 操作按钮的宽度自适应\n    fixedWidth() {\n      return this.operationCustomLength ? this.operationCustomLength * 110 - 5 : this.operation.length * 110 - 5\n    }\n  },\n  mounted() {\n    this.cacheCurrentPage = this.currentPage\n  },\n  methods: {\n    /*\n    * 表格\n    * */\n    // 筛选行的操作\n    operationGroup(affix) {\n      if (affix === 'custom') {\n        // 自定义列表\n        this.customList = this.operation.filter(n => {\n          return typeof n === 'object'\n        })\n        return this.customList\n      } else {\n        // 固定\n        return this.operation.indexOf(affix) >= 0\n      }\n    },\n    // 自定义事件触发\n    handleCustom(index, row, handler) {\n      this.$emit(handler, index, row)\n    },\n    // 编辑事件\n    handleEdit(index, row) {\n      this.$emit('handleEdit', index, row)\n    },\n    // 插入事件\n    handleInsert(index, row) {\n      this.$emit('handleInsert', index, row)\n    },\n    // 删除事件\n    handleDelete(index, row) {\n      this.$confirm('确认删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$emit('handleDelete', index, row)\n      })\n    },\n    // 查看事件\n    handleCheck(index, row) {\n      this.$emit('handleCheck', index, row)\n    },\n    // 选中改变事件\n    handleSelectionChange(val) {\n      this.$emit('handleSelectionChange', val)\n    },\n    // 单个选中事件\n    handleSelect(list) {\n      this.cacheSelectData[this.cacheCurrentPage] = list\n      this.$emit('handleSelect', list)\n    },\n    // 全选事件\n    handleSelectAll(list) {\n      // 防止指针错乱\n      this.cacheSelectData[this.cacheCurrentPage] = list.length ? list : null\n      this.$emit('handleSelect', list)\n    },\n    // 单行选中\n    setSelection(row, bool) {\n      this.$refs.tableGroup.toggleRowSelection(row, bool)\n    },\n    // 清空选中\n    clearSelection() {\n      this.$refs.tableGroup.clearSelection()\n    },\n    // 分页选择回显\n    echoSelection(currentPageSelectList) {\n      if (currentPageSelectList) {\n        const _list = this.data.filter(row => {\n          return currentPageSelectList.some(item => {\n            return item[this.judgeValue] === row[this.judgeValue]\n          })\n        })\n        _list.forEach(row => {\n          this.setSelection(row)\n          // or\n          // this.$refs.tableGroup.toggleRowSelection(row)\n        })\n      }\n    },\n\n    /*\n    * 分页\n    * */\n    handleSizeChange(num) {\n      this.$emit('handleSizeChange', num)\n    },\n    handleCurrentChange(page) {\n      this.$emit('handleCurrentChange', page)\n      this.cacheCurrentPage = page\n      // 等待表格数据回显\n      setTimeout(() => {\n        this.echoSelection(this.cacheSelectData[page])\n      }, 500)\n    },\n\n    /*\n    * 按钮\n    * */\n    // 确定\n    handleConfirm() {\n      // 所有选中的数据\n      const _AllSelectData = [].concat(...this.cacheSelectData).filter((item) => {\n        return item !== null && typeof item === 'object'\n      })\n      this.$emit('handleConfirm', _AllSelectData)\n      this.cacheSelectData = []\n      this.clearSelection()\n    },\n    // 取消\n    handleCancel() {\n      this.cacheSelectData = []\n      this.$emit('handleCancel')\n      this.clearSelection()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" ref=\"stylesheet/scss\">\n  .el-table-container{\n    .el-pagination-c{\n      float: right;\n      margin-top: 1.5em;\n    }\n    .el-row-select{\n      margin-top: 6em;\n      .el-col-select{\n        text-align: center;\n      }\n    }\n  }\n</style>\n"]}]}