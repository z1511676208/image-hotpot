{"remainingRequest":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Desktop/gitlab/image-hotpot/src/components/HotspotImage/Main/OperationFloor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/Desktop/gitlab/image-hotpot/src/components/HotspotImage/Main/OperationFloor.vue","mtime":1628479317920},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js","mtime":1628478904830},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1628478909545}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AreaBox from \"./AreaBox\";\nexport default {\n  name: \"OperationFloor\",\n  components: {\n    AreaBox: AreaBox\n  },\n  data: function data() {\n    return {\n      starX: 0,\n      // endX: 0,\n      starY: 0,\n      // endY: 0,\n      areaWidth: 0,\n      areaHeight: 0,\n      caseShow: false,\n      nowImgWidth: null,\n      areaData: []\n    };\n  },\n  mounted: function mounted() {\n    // 显示之前添加的热区\n    var areaData = JSON.parse(localStorage.getItem(\"areaData\"));\n\n    if (areaData && areaData.length) {\n      this.areaData = areaData;\n    }\n  },\n  methods: {\n    // 绘画热区开始\n    mouseDown: function mouseDown(e) {\n      var _this = this;\n\n      this.caseShow = true; // 记录滑动的初始值\n\n      this.starX = e.layerX;\n      this.starY = e.layerY; // 鼠标滑动的过程\n\n      if (!document.onmousemove) {\n        document.onmousemove = function (ev) {\n          _this.areaWidth = ev.layerX - _this.starX;\n          _this.areaHeight = ev.layerY - _this.starY;\n        };\n      }\n    },\n    // 绘画热区结束\n    changeStop: function changeStop() {\n      document.onmousemove = null;\n\n      if (this.caseShow && this.areaWidth > 10 && this.areaHeight > 10) {\n        var data = {\n          starX: this.starX,\n          starY: this.starY,\n          areaWidth: this.areaWidth,\n          areaHeight: this.areaHeight,\n          nowImgWidth: this.$refs.backgroundImg.width,\n          url: null,\n          target: \"_self\"\n        };\n        this.areaData.push(data); // console.log(this.areaData)\n      } // 初始化绘图\n\n\n      this.caseShow = false;\n      this.starX = 0;\n      this.starY = 0;\n      this.areaWidth = 0;\n      this.areaHeight = 0;\n    },\n    // 删除指定热区\n    DelAreaBox: function DelAreaBox(id) {\n      this.areaData.splice(id, 1);\n    },\n    // 添加网址\n    addURL: function addURL(id, urlData) {\n      this.areaData[id].url = urlData.url;\n      this.areaData[id].target = urlData.select;\n      this.$message.success(\"添加成功\");\n      console.log(this.areaData);\n    },\n    // 保存热区信息\n    saveAreaData: function saveAreaData() {\n      if (this.areaData === []) {\n        this.$message.error(\"没有可保存的信息\");\n      } else {\n        localStorage.setItem(\"areaData\", JSON.stringify(this.areaData));\n        this.$message.success(\"保存成功\"); // console.log(this.areaData)\n      }\n    },\n    // 清除热区信息\n    clearHotSpotInfo: function clearHotSpotInfo() {\n      localStorage.removeItem(\"areaData\");\n      this.areaData = [];\n    }\n  }\n};",{"version":3,"sources":["OperationFloor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"operationFloor\">\n    <div class=\"imgBox\" @mouseup.left.stop=\"changeStop()\">\n      <div class=\"container\">\n        <img\n          ref=\"backgroundImg\"\n          src=\"../../../assets/hotAreaImage.png\"\n          ondragstart=\"return false;\"\n          oncontextmenu=\"return false;\"\n          onselect=\"document.selection.empty();\"\n          alt=\"\"\n          @mousedown.left.stop=\"mouseDown($event)\"\n        />\n        <!--绘制的热区-->\n        <div\n          v-show=\"caseShow\"\n          class=\"area\"\n          :style=\"{\n            width: areaWidth + 'px',\n            height: areaHeight + 'px',\n            left: starX + 'px',\n            top: starY + 'px',\n          }\"\n        />\n        <!--已有的热区-->\n        <AreaBox\n          v-for=\"(item, index) in areaData\"\n          :id=\"index\"\n          :key=\"index\"\n          :area-init.sync=\"item\"\n          @DelAreaBox=\"DelAreaBox\"\n          @addURL=\"addURL\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AreaBox from \"./AreaBox\";\n\nexport default {\n  name: \"OperationFloor\",\n  components: {\n    AreaBox,\n  },\n  data() {\n    return {\n      starX: 0,\n      // endX: 0,\n      starY: 0,\n      // endY: 0,\n      areaWidth: 0,\n      areaHeight: 0,\n      caseShow: false,\n      nowImgWidth: null,\n      areaData: [],\n    };\n  },\n  mounted() {\n    // 显示之前添加的热区\n    const areaData = JSON.parse(localStorage.getItem(\"areaData\"));\n    if (areaData && areaData.length) {\n      this.areaData = areaData;\n    }\n  },\n  methods: {\n    // 绘画热区开始\n    mouseDown(e) {\n      this.caseShow = true;\n      // 记录滑动的初始值\n      this.starX = e.layerX;\n      this.starY = e.layerY;\n      // 鼠标滑动的过程\n      if (!document.onmousemove) {\n        document.onmousemove = (ev) => {\n          this.areaWidth = ev.layerX - this.starX;\n          this.areaHeight = ev.layerY - this.starY;\n        };\n      }\n    },\n    // 绘画热区结束\n    changeStop() {\n      document.onmousemove = null;\n      if (this.caseShow && this.areaWidth > 10 && this.areaHeight > 10) {\n        const data = {\n          starX: this.starX,\n          starY: this.starY,\n          areaWidth: this.areaWidth,\n          areaHeight: this.areaHeight,\n          nowImgWidth: this.$refs.backgroundImg.width,\n          url: null,\n          target: \"_self\",\n        };\n        this.areaData.push(data);\n        // console.log(this.areaData)\n      }\n      // 初始化绘图\n      this.caseShow = false;\n      this.starX = 0;\n      this.starY = 0;\n      this.areaWidth = 0;\n      this.areaHeight = 0;\n    },\n    // 删除指定热区\n    DelAreaBox(id) {\n      this.areaData.splice(id, 1);\n    },\n    // 添加网址\n    addURL(id, urlData) {\n      this.areaData[id].url = urlData.url;\n      this.areaData[id].target = urlData.select;\n      this.$message.success(\"添加成功\");\n      console.log(this.areaData);\n    },\n    // 保存热区信息\n    saveAreaData() {\n      if (this.areaData === []) {\n        this.$message.error(\"没有可保存的信息\");\n      } else {\n        localStorage.setItem(\"areaData\", JSON.stringify(this.areaData));\n        this.$message.success(\"保存成功\");\n        // console.log(this.areaData)\n      }\n    },\n    // 清除热区信息\n    clearHotSpotInfo() {\n      localStorage.removeItem(\"areaData\");\n      this.areaData = [];\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\" ref=\"stylesheet/scss\">\n.operationFloor {\n  position: relative;\n  .header {\n    .titleBox {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      height: 100px;\n      .name {\n        font-size: 13px;\n        font-weight: bold;\n      }\n    }\n    .textBox {\n      font-size: 12px;\n      color: #777;\n      margin-bottom: 10px;\n    }\n  }\n  .imgBox {\n    display: flex;\n    justify-content: center;\n    .container {\n      position: relative;\n      overflow: hidden;\n    }\n    img {\n      cursor: crosshair;\n    }\n    .area {\n      position: absolute;\n      width: 200px;\n      height: 200px;\n      left: 200px;\n      top: 300px;\n      background: rgba(#2980b9, 0.3);\n      border: 1px dashed #34495e;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/HotspotImage/Main"}]}