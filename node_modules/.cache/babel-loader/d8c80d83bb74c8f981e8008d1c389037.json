{"remainingRequest":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Desktop/gitlab/image-hotpot/src/components/hotpotModal/OperationFloor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/Desktop/gitlab/image-hotpot/src/components/hotpotModal/OperationFloor.vue","mtime":1628822081718},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js","mtime":1628478904830},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1628478909545}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.string.link\";\nimport _defineProperty from \"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AreaBox from \"./AreaBox\";\nimport { checkURL } from \"@/utils/validate\";\nexport default {\n  name: \"OperationFloor\",\n  components: {\n    AreaBox: AreaBox\n  },\n  props: {\n    imgs: {\n      type: String,\n      default: function _default() {\n        return \"\";\n      }\n    },\n    isHotPot: {\n      type: Boolean,\n      default: function _default() {\n        return false;\n      }\n    },\n    imgAreaData: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    linkInputStyle: {\n      type: Object,\n      default: function _default() {\n        return {\n          width: \"250px\"\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      starX: 0,\n      starY: 0,\n      areaWidth: 0,\n      areaHeight: 0,\n      caseShow: false,\n      nowImgWidth: null,\n      areaData: [],\n      imgNum: 1,\n      parentWidth: 0,\n      parentHeight: 0\n    };\n  },\n  computed: {},\n  watch: {\n    imgAreaData: function imgAreaData(val) {\n      this.areaData = _toConsumableArray(val);\n    }\n  },\n  mounted: function mounted() {\n    this.areaData = _toConsumableArray(this.imgAreaData);\n  },\n  methods: {\n    openModal: function openModal() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var parentDiv = document.querySelector(\"#img-box-container\"); //获取元素的宽高\n\n        _this.parentWidth = parentDiv.clientWidth;\n        _this.parentHeight = parentDiv.clientHeight; // console.log(\"this.parentWidth\", this.parentWidth, this.parentHeight)\n      });\n    },\n    closeModal: function closeModal() {\n      var _this2 = this;\n\n      this.$confirm(\"未保存内容，是否在离开前放弃保存？\", \"提示信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      }).then(function () {\n        _this2.dialogVisible = false;\n        _this2.areaData = _toConsumableArray(_this2.imgAreaData);\n      }).catch(function (action) {\n        console.log(action);\n      });\n    },\n    clearList: function clearList() {\n      var _this3 = this;\n\n      this.$confirm(\"确定放弃修改内容嘛？\", \"提示信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      }).then(function () {\n        _this3.areaData = _this3.imgAreaData || [];\n        _this3.dialogVisible = false;\n      }).catch(function (action) {\n        console.log(action);\n      }); // this.imgNum = 1;\n    },\n    onBlur: function onBlur(e, index) {\n      console.log(\"areaData_data\", e, this.areaData[index]);\n    },\n    // 绘画热区开始\n    mouseDown: function mouseDown(e) {\n      var _this4 = this;\n\n      e.preventDefault();\n      this.caseShow = true; // 记录滑动的初始值\n\n      this.starX = e.layerX;\n      this.starY = e.layerY; // 鼠标滑动的过程\n\n      if (!document.onmousemove) {\n        document.onmousemove = function (ev) {\n          _this4.areaWidth = ev.layerX - _this4.starX;\n          _this4.areaHeight = ev.layerY - _this4.starY;\n        };\n      }\n    },\n    // 绘画热区结束\n    changeStop: function changeStop() {\n      document.onmousemove = null;\n      this.imgNum = this.areaData.length + 1;\n\n      if (this.caseShow && this.areaWidth > 10 && this.areaHeight > 10) {\n        var data = {\n          number: this.imgNum,\n          starX: this.starX,\n          starY: this.starY,\n          areaWidth: this.areaWidth,\n          areaHeight: this.areaHeight,\n          nowImgWidth: this.$refs.backgroundImg.width,\n          link: \"\",\n          title: \"\",\n          target: \"_self\"\n        };\n        this.areaData.push(data);\n      } // 初始化绘图\n\n\n      this.caseShow = false;\n      this.starX = 0;\n      this.starY = 0;\n      this.areaWidth = 0;\n      this.areaHeight = 0; // this.saveAreaData()\n    },\n    // 删除指定热区\n    delAreaBox: function delAreaBox(index) {\n      /* 删除某个热区 */\n      this.areaData.splice(index, 1);\n      this.$emit(\"delAreaData\", this.areaData);\n      /* 删除后 每个热区按顺序重新编号 */\n\n      if (this.areaData) {\n        var arr = this.areaData.filter(function (i) {\n          return i.number > index;\n        });\n        if (!arr) return;\n        arr.forEach(function (i) {\n          return i.number--;\n        });\n\n        if (this.areaData[this.areaData.length - 1]) {\n          this.imgNum = this.areaData[this.areaData.length - 1].number + 1;\n        } else {\n          this.imgNum = 1;\n        }\n      }\n    },\n    // 添加网址\n    addURL: function addURL(index, url, title) {\n      var obj = _objectSpread({}, this.areaData[index], {\n        title: title,\n        link: url\n      });\n\n      this.$set(this.areaData, index, obj); // this.saveAreaData()\n    },\n    // 保存热区信息\n    saveAreaData: function saveAreaData() {\n      if (this.areaData && !this.areaData.length || !this.checkData(this.areaData)) {\n        this.$message.error(\"热区是否配置链接、是否至少添加一个热区?\");\n        return;\n      }\n\n      this.$emit(\"saveAreaData\", this.areaData);\n      this.dialogVisible = false;\n      this.$message.success(\"保存成功!!\");\n    },\n    checkData: function checkData(list) {\n      var isCheck = true;\n      list.some(function (val) {\n        if (!val.link || !checkURL(val.link)) {\n          isCheck = false;\n        }\n      });\n      return isCheck;\n    }\n  }\n};",{"version":3,"sources":["OperationFloor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    title=\"编辑热区\"\n    :visible.sync=\"dialogVisible\"\n    top=\"8vh\"\n    width=\"1200px\"\n    center\n    :before-close=\"closeModal\"\n    :close-on-click-modal=\"false\"\n    @open=\"openModal\"\n  >\n    <div class=\"operationFloor\">\n      <div class=\"imgBox\" @mouseup.left.stop=\"changeStop()\">\n        <div ref=\"container\" id=\"img-box-container\" class=\"container\">\n          <img\n            ref=\"backgroundImg\"\n            :src=\"imgs\"\n            ondragstart=\"return false;\"\n            oncontextmenu=\"return false;\"\n            onselect=\"document.selection.empty();\"\n            alt=\"img\"\n            @mousedown.left.stop=\"mouseDown($event)\"\n          />\n          <!--draw hotpot-->\n          <div\n            v-show=\"caseShow\"\n            :style=\"{\n              width: areaWidth + 'px',\n              height: areaHeight + 'px',\n              left: starX + 'px',\n              top: starY + 'px'\n            }\"\n            class=\"area\"\n          />\n          <!--be hotpot-->\n          <AreaBox\n            v-for=\"(item, index) in areaData\"\n            :area-data-index=\"index\"\n            :key=\"'area' + index\"\n            :link=\"item.link\"\n            :title=\"item.title\"\n            :type=\"parseInt(item.type)\"\n            :area-init.sync=\"item\"\n            :parent-width=\"parentWidth\"\n            :parent-height=\"parentHeight\"\n            @delAreaBox=\"delAreaBox\"\n            @addURL=\"addURL\"\n          />\n        </div>\n      </div>\n      <!-- 热区链接配置 -->\n      <div class=\"form\">\n        <div v-for=\"(item, index) in areaData\" :key=\"index\" class=\"form-row\">\n          <div class=\"form-item\">\n            <el-tag>热区{{ item.number }}</el-tag>\n          </div>\n          <div class=\"form-item\">\n            <label class=\"label\">名称</label\n            ><el-input v-model=\"item.title\" :style=\"linkInputStyle\" />\n          </div>\n          <div class=\"form-item\">\n            <label class=\"label\">链接</label\n            ><el-input\n              v-model.trim=\"item.link\"\n              :style=\"linkInputStyle\"\n              @blur=\"onBlur($event, index)\"\n            />\n          </div>\n          <i class=\"el-icon-delete\" @click=\"delAreaBox(index)\" />\n        </div>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeModal\"> 取 消 </el-button>\n        <el-button type=\"primary\" @click=\"saveAreaData\"> 保 存 </el-button>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport AreaBox from \"./AreaBox\";\nimport { checkURL } from \"@/utils/validate\";\n\nexport default {\n  name: \"OperationFloor\",\n  components: {\n    AreaBox\n  },\n  props: {\n    imgs: {\n      type: String,\n      default: () => \"\"\n    },\n    isHotPot: {\n      type: Boolean,\n      default: () => false\n    },\n    imgAreaData: {\n      type: Array,\n      default: () => []\n    },\n    linkInputStyle: {\n      type: Object,\n      default: () => ({\n        width: \"250px\"\n      })\n    }\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      starX: 0,\n      starY: 0,\n      areaWidth: 0,\n      areaHeight: 0,\n      caseShow: false,\n      nowImgWidth: null,\n      areaData: [],\n      imgNum: 1,\n      parentWidth: 0,\n      parentHeight: 0\n    };\n  },\n  computed: {},\n  watch: {\n    imgAreaData(val) {\n      this.areaData = [...val];\n    }\n  },\n  mounted() {\n    this.areaData = [...this.imgAreaData];\n  },\n  methods: {\n    openModal() {\n      this.$nextTick(() => {\n        const parentDiv = document.querySelector(\"#img-box-container\");\n        //获取元素的宽高\n        this.parentWidth = parentDiv.clientWidth;\n        this.parentHeight = parentDiv.clientHeight;\n        // console.log(\"this.parentWidth\", this.parentWidth, this.parentHeight)\n      });\n    },\n    closeModal() {\n      this.$confirm(\"未保存内容，是否在离开前放弃保存？\", \"提示信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      })\n        .then(() => {\n          this.dialogVisible = false;\n          this.areaData = [...this.imgAreaData];\n        })\n        .catch((action) => {\n          console.log(action);\n        });\n    },\n    clearList() {\n      this.$confirm(\"确定放弃修改内容嘛？\", \"提示信息\", {\n        distinguishCancelAndClose: true,\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      })\n        .then(() => {\n          this.areaData = this.imgAreaData || [];\n          this.dialogVisible = false;\n        })\n        .catch((action) => {\n          console.log(action);\n        });\n\n      // this.imgNum = 1;\n    },\n    onBlur(e, index) {\n      console.log(\"areaData_data\", e, this.areaData[index]);\n    },\n    // 绘画热区开始\n    mouseDown(e) {\n      e.preventDefault();\n      this.caseShow = true;\n      // 记录滑动的初始值\n      this.starX = e.layerX;\n      this.starY = e.layerY;\n      // 鼠标滑动的过程\n      if (!document.onmousemove) {\n        document.onmousemove = (ev) => {\n          this.areaWidth = ev.layerX - this.starX;\n          this.areaHeight = ev.layerY - this.starY;\n        };\n      }\n    },\n    // 绘画热区结束\n    changeStop() {\n      document.onmousemove = null;\n      this.imgNum = this.areaData.length + 1;\n      if (this.caseShow && this.areaWidth > 10 && this.areaHeight > 10) {\n        const data = {\n          number: this.imgNum,\n          starX: this.starX,\n          starY: this.starY,\n          areaWidth: this.areaWidth,\n          areaHeight: this.areaHeight,\n          nowImgWidth: this.$refs.backgroundImg.width,\n          link: \"\",\n          title: \"\",\n          target: \"_self\"\n        };\n        this.areaData.push(data);\n      }\n      // 初始化绘图\n      this.caseShow = false;\n      this.starX = 0;\n      this.starY = 0;\n      this.areaWidth = 0;\n      this.areaHeight = 0;\n      // this.saveAreaData()\n    },\n    // 删除指定热区\n    delAreaBox(index) {\n      /* 删除某个热区 */\n      this.areaData.splice(index, 1);\n      this.$emit(\"delAreaData\", this.areaData);\n      /* 删除后 每个热区按顺序重新编号 */\n      if (this.areaData) {\n        const arr = this.areaData.filter((i) => i.number > index);\n        if (!arr) return;\n        arr.forEach((i) => i.number--);\n        if (this.areaData[this.areaData.length - 1]) {\n          this.imgNum = this.areaData[this.areaData.length - 1].number + 1;\n        } else {\n          this.imgNum = 1;\n        }\n      }\n    },\n    // 添加网址\n    addURL(index, url, title) {\n      let obj = {\n        ...this.areaData[index],\n        title,\n        link: url\n      };\n      this.$set(this.areaData, index, obj);\n      // this.saveAreaData()\n    },\n    // 保存热区信息\n    saveAreaData() {\n      if (\n        (this.areaData && !this.areaData.length) ||\n        !this.checkData(this.areaData)\n      ) {\n        this.$message.error(\"热区是否配置链接、是否至少添加一个热区?\");\n        return;\n      }\n      this.$emit(\"saveAreaData\", this.areaData);\n      this.dialogVisible = false;\n      this.$message.success(\"保存成功!!\");\n    },\n    checkData(list) {\n      let isCheck = true;\n      list.some((val) => {\n        if (!val.link || !checkURL(val.link)) {\n          isCheck = false;\n        }\n      });\n      return isCheck;\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\" ref=\"stylesheet/scss\">\n.btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 0;\n}\n.dialog-footer {\n  text-align: right;\n  margin-top: 20px;\n  margin-right: 20px;\n}\n.operationFloor {\n  position: relative;\n  max-height: 75vh;\n  overflow-y: auto;\n  .header {\n    .titleBox {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      height: 100px;\n      .name {\n        font-size: 13px;\n        font-weight: bold;\n      }\n    }\n    .textBox {\n      font-size: 12px;\n      color: #777;\n      margin-bottom: 10px;\n    }\n  }\n  .imgBox {\n    display: flex;\n    justify-content: center;\n    .container {\n      position: relative;\n      overflow: hidden;\n    }\n    img {\n      cursor: crosshair;\n      display: block;\n    }\n    .area {\n      position: absolute;\n      width: 200px;\n      height: 200px;\n      left: 200px;\n      top: 300px;\n      background: rgba(#2980b9, 0.3);\n      border: 1px dashed #34495e;\n    }\n  }\n}\n.form {\n  font-size: 12px;\n  width: 100%;\n  .form-row {\n    display: flex;\n    margin: 8px 0;\n    align-items: center;\n    .form-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      white-space: nowrap;\n      margin: 0 5px;\n      .label {\n        margin-right: 10px;\n      }\n    }\n  }\n  .el-icon-delete {\n    font-size: 16px;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/hotpotModal"}]}