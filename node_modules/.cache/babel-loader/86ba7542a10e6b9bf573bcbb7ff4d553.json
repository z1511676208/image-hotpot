{"remainingRequest":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Desktop/gitlab/image-hotpot/src/components/plugin/element/form/el-img-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/Desktop/gitlab/image-hotpot/src/components/plugin/element/form/el-img-upload.vue","mtime":1628478882845},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js","mtime":1628478904830},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1628478909545}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar uploadUrl = process.env.NODE_ENV === 'production' ? 'https://jsonplaceholder.typicode.com/posts/' : 'https://jsonplaceholder.typicode.com/posts/';\nexport default {\n  name: 'ElImgUpload',\n  props: {\n    existImage: {\n      type: String,\n      default: ''\n    },\n    placeTxt: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      uploadUrl: uploadUrl,\n      imageUrl: ''\n    };\n  },\n  watch: {\n    existImage: function existImage(val) {\n      this.imageUrl = val;\n    }\n  },\n  created: function created() {\n    this.imageUrl = this.existImage;\n  },\n  methods: {\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = res.fileUrl;\n      this.$emit('handleChange', this.imageUrl);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG或者PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    },\n    handleDelete: function handleDelete() {\n      var _this = this;\n\n      this.$confirm('确认删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.imageUrl = '';\n\n        _this.$emit('handleDelete');\n      });\n    }\n  }\n};",{"version":3,"sources":["el-img-upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAoBA,IAAA,SAAA,GAAA,OAAA,CAAA,GAAA,CAAA,QAAA,KAAA,YAAA,GAAA,6CAAA,GAAA,6CAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AALA,GAFA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,SADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAjBA;AAkBA,EAAA,KAAA,EAAA;AACA,IAAA,UADA,sBACA,GADA,EACA;AACA,WAAA,QAAA,GAAA,GAAA;AACA;AAHA,GAlBA;AAuBA,EAAA,OAvBA,qBAuBA;AACA,SAAA,QAAA,GAAA,KAAA,UAAA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,+BACA,GADA,EACA,IADA,EACA;AACA,WAAA,QAAA,GAAA,GAAA,CAAA,OAAA;AACA,WAAA,KAAA,CAAA,cAAA,EAAA,KAAA,QAAA;AACA,KAJA;AAKA,IAAA,kBALA,8BAKA,IALA,EAKA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,YAAA,IAAA,IAAA,CAAA,IAAA,KAAA,WAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,wBAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;AACA;;AACA,aAAA,KAAA,IAAA,MAAA;AACA,KAfA;AAgBA,IAAA,YAhBA,0BAgBA;AAAA;;AACA,WAAA,QAAA,CAAA,OAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,EAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,cAAA;AACA,OAPA;AAQA;AAzBA;AA1BA,CAAA","sourcesContent":["<template>\n  <div class=\"el-img-upload\">\n    <el-upload\n      :action=\"uploadUrl\"\n      :show-file-list=\"false\"\n      :on-success=\"handleAvatarSuccess\"\n      :before-upload=\"beforeAvatarUpload\"\n      class=\"avatar-uploader\"\n    >\n      <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n      <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\n      <i v-if=\"imageUrl\" class=\"el-icon-circle-close\" @click.stop=\"handleDelete\" />\n      <div slot=\"tip\" class=\"el-upload__tip\">\n        {{ placeTxt }}\n      </div>\n    </el-upload>\n  </div>\n</template>\n\n<script>\nconst uploadUrl = process.env.NODE_ENV === 'production' ? 'https://jsonplaceholder.typicode.com/posts/' : 'https://jsonplaceholder.typicode.com/posts/'\nexport default {\n  name: 'ElImgUpload',\n  props: {\n    existImage: {\n      type: String,\n      default: ''\n    },\n    placeTxt: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      uploadUrl,\n      imageUrl: ''\n    }\n  },\n  watch: {\n    existImage(val) {\n      this.imageUrl = val\n    }\n  },\n  created() {\n    this.imageUrl = this.existImage\n  },\n  methods: {\n    handleAvatarSuccess(res, file) {\n      this.imageUrl = res.fileUrl\n      this.$emit('handleChange', this.imageUrl)\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png'\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG或者PNG 格式!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上传图片大小不能超过 2MB!')\n      }\n      return isJPG && isLt2M\n    },\n    handleDelete() {\n      this.$confirm('确认删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.imageUrl = ''\n        this.$emit('handleDelete')\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" ref=\"stylesheet/scss\">\n.el-img-upload{}\n</style>\n\n<style lang=\"scss\">\n  .el-img-upload{\n    .el-upload {\n      width: 120px;\n      height: 120px;\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      .el-icon-plus{\n        font-size: 30px;\n        color: #999999;\n      }\n      .el-icon-circle-close{\n        position: absolute;\n        color: #999999;\n        top: 2px;\n        right: 2px;\n        z-index: 100;\n        font-size: 15px;\n        opacity: 0.5;\n        transition: opacity 0.2s;\n        &:hover{\n          opacity: 0.8;\n          color: #ef032a;\n        }\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/plugin/element/form"}]}