{"remainingRequest":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Desktop/gitlab/image-hotpot/src/layout/components/TagsView/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edy/Desktop/gitlab/image-hotpot/src/layout/components/TagsView/index.vue","mtime":1628478882847},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/babel-loader/lib/index.js","mtime":1628478904830},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/cache-loader/dist/cjs.js","mtime":1625024217486},{"path":"/Users/edy/Desktop/gitlab/image-hotpot/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1628478909545}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ScrollPane from \"./ScrollPane\";\nexport default {\n  name: 'TagsView',\n  components: {\n    ScrollPane: ScrollPane\n  },\n  data: function data() {\n    return {\n      visible: false,\n      top: 0,\n      left: 0,\n      selectedTag: {}\n    };\n  },\n  computed: {\n    visitedViews: function visitedViews() {\n      return this.$store.state.tagsView.visitedViews;\n    }\n  },\n  watch: {\n    $route: function $route() {\n      this.addTags();\n    },\n    visible: function visible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu);\n      } else {\n        document.body.removeEventListener('click', this.closeMenu);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.addTags();\n  },\n  methods: {\n    handleScroll: function handleScroll(e) {\n      console.log(e);\n    },\n    isActive: function isActive(route) {\n      return route.path === this.$route.path;\n    },\n    isAffix: function isAffix(tag) {\n      return tag.meta && tag.meta.affix;\n    },\n    addTags: function addTags() {\n      var name = this.$route.name;\n\n      if (name) {\n        this.$store.dispatch('tagsView/addVisitedView', this.$route);\n      }\n\n      return false;\n    },\n    closeSelectedTag: function closeSelectedTag(view) {\n      var _this = this;\n\n      this.$store.dispatch('tagsView/delVisitedView', view).then(function (visitedViews) {\n        if (_this.isActive(view)) {\n          _this.toLastView(visitedViews, view);\n        }\n      });\n    },\n    toLastView: function toLastView(visitedViews, view) {\n      var latestView = visitedViews.slice(-1)[0];\n\n      if (latestView) {\n        this.$router.push(latestView.fullPath);\n      } else {\n        this.$router.push('/');\n      }\n    },\n    openMenu: function openMenu(tag, e) {\n      console.log('鼠标右键事件', tag, e);\n      var menuMinWidth = 105;\n      var offsetLeft = this.$el.getBoundingClientRect().left; // container margin left\n\n      var offsetWidth = this.$el.offsetWidth; // container width\n\n      var maxLeft = offsetWidth - menuMinWidth; // left boundary\n\n      var left = e.clientX - offsetLeft + 15; // 15: margin right\n\n      if (left > maxLeft) {\n        this.left = maxLeft;\n      } else {\n        this.left = left;\n      }\n\n      this.top = e.layerY;\n      this.visible = true;\n      this.selectedTag = tag;\n    },\n    closeMenu: function closeMenu() {\n      console.log('关闭菜单');\n      this.visible = false;\n    },\n    refreshSelectedTag: function refreshSelectedTag(view) {\n      var _this2 = this;\n\n      var fullPath = view.fullPath;\n      this.$nextTick(function () {\n        _this2.$router.replace({\n          path: '/redirect' + fullPath\n        });\n      });\n    },\n    closeOthersTags: function closeOthersTags(view) {\n      var _this3 = this;\n\n      this.$store.dispatch('tagsView/delOthersVisitedViews', view).then(function (visitedViews) {\n        _this3.toLastView(visitedViews, view);\n      });\n    },\n    closeAllTags: function closeAllTags(view) {\n      var _this4 = this;\n\n      this.$store.dispatch('tagsView/delAllVisitedViews').then(function (visitedViews) {\n        // if (this.affixTags.some(tag => tag.path === view.path)) {\n        //   return\n        // }\n        _this4.toLastView(visitedViews, view);\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"tags-view-container\" class=\"tags-view-container\">\n    <!--@wheel.native.prevent=\"handleScroll\"-->\n    <scroll-pane ref=\"scrollPane\" class=\"tags-view-wrapper\">\n      <router-link\n        v-for=\"tag in visitedViews\"\n        :key=\"tag.path\"\n        :to=\"tag.path\"\n        :class=\"isActive(tag)?'active':''\"\n        class=\"tags-view-item\"\n        @click.middle.native=\"!isAffix(tag)?closeSelectedTag(tag):''\"\n        @contextmenu.prevent.native=\"openMenu(tag,$event)\"\n      >\n        {{ tag.title }}\n        <span v-if=\"!isAffix(tag)\" class=\"el-icon-close\" @click.prevent.stop=\"closeSelectedTag(tag)\" />\n      </router-link>\n    </scroll-pane>\n    <ul v-show=\"visible\" :style=\"{left:left+'px',top:top+'px'}\" class=\"contextmenu\">\n      <li @click=\"refreshSelectedTag(selectedTag)\">\n        刷新\n      </li>\n      <li v-if=\"!isAffix(selectedTag)\" @click=\"closeSelectedTag(selectedTag)\">\n        关闭\n      </li>\n      <li @click=\"closeOthersTags(selectedTag)\">\n        关闭其他\n      </li>\n      <li @click=\"closeAllTags\">\n        关闭所有\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport ScrollPane from './ScrollPane'\n\nexport default {\n  name: 'TagsView',\n  components: { ScrollPane },\n  data() {\n    return {\n      visible: false,\n      top: 0,\n      left: 0,\n      selectedTag: {}\n    }\n  },\n  computed: {\n    visitedViews() {\n      return this.$store.state.tagsView.visitedViews\n    }\n  },\n  watch: {\n    $route() {\n      this.addTags()\n    },\n    visible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu)\n      } else {\n        document.body.removeEventListener('click', this.closeMenu)\n      }\n    }\n  },\n  mounted() {\n    this.addTags()\n  },\n  methods: {\n    handleScroll(e) {\n      console.log(e)\n    },\n    isActive(route) {\n      return route.path === this.$route.path\n    },\n    isAffix(tag) {\n      return tag.meta && tag.meta.affix\n    },\n    addTags() {\n      const { name } = this.$route\n      if (name) {\n        this.$store.dispatch('tagsView/addVisitedView', this.$route)\n      }\n      return false\n    },\n    closeSelectedTag(view) {\n      this.$store.dispatch('tagsView/delVisitedView', view).then((visitedViews) => {\n        if (this.isActive(view)) {\n          this.toLastView(visitedViews, view)\n        }\n      })\n    },\n    toLastView(visitedViews, view) {\n      const latestView = visitedViews.slice(-1)[0]\n      if (latestView) {\n        this.$router.push(latestView.fullPath)\n      } else {\n        this.$router.push('/')\n      }\n    },\n    openMenu(tag, e) {\n      console.log('鼠标右键事件', tag, e)\n      const menuMinWidth = 105\n      const offsetLeft = this.$el.getBoundingClientRect().left // container margin left\n      const offsetWidth = this.$el.offsetWidth // container width\n      const maxLeft = offsetWidth - menuMinWidth // left boundary\n      const left = e.clientX - offsetLeft + 15 // 15: margin right\n\n      if (left > maxLeft) {\n        this.left = maxLeft\n      } else {\n        this.left = left\n      }\n\n      this.top = e.layerY\n      this.visible = true\n      this.selectedTag = tag\n    },\n    closeMenu() {\n      console.log('关闭菜单')\n      this.visible = false\n    },\n    refreshSelectedTag(view) {\n      const { fullPath } = view\n      this.$nextTick(() => {\n        this.$router.replace({\n          path: '/redirect' + fullPath\n        })\n      })\n    },\n    closeOthersTags(view) {\n      this.$store.dispatch('tagsView/delOthersVisitedViews', view).then((visitedViews) => {\n        this.toLastView(visitedViews, view)\n      })\n    },\n    closeAllTags(view) {\n      this.$store.dispatch('tagsView/delAllVisitedViews').then((visitedViews) => {\n        // if (this.affixTags.some(tag => tag.path === view.path)) {\n        //   return\n        // }\n        this.toLastView(visitedViews, view)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  $themeColors: #409EFF;\n\n  .tags-view-container{\n    white-space: nowrap;\n    border-top: 1px solid #d8dce5;\n    border-bottom: 1px solid #d8dce5;\n    position: relative;\n\n    .tags-view-wrapper {\n      padding: 4px 0;\n\n      .tags-view-item{\n        display: inline-block;\n        position: relative;\n        cursor: pointer;\n        height: 26px;\n        line-height: 26px;\n        border: 1px solid #d8dce5;\n        color: #495060;\n        background: #fff;\n        padding: 0 8px;\n        font-size: 12px;\n        margin-left: 5px;\n        text-decoration: none;\n        &:first-of-type {\n          margin-left: 15px;\n        }\n        &:last-of-type {\n          margin-right: 15px;\n        }\n        &.active {\n          background-color: $themeColors;\n          color: #fff;\n          border-color: $themeColors;\n          &::before {\n            content: '';\n            background: #fff;\n            display: inline-block;\n            width: 8px;\n            height: 8px;\n            border-radius: 50%;\n            position: relative;\n            margin-right: 2px;\n          }\n        }\n        .el-icon-close {\n          width: 16px;\n          height: 16px;\n          vertical-align: 2px;\n          border-radius: 50%;\n          text-align: center;\n          transition: all .3s cubic-bezier(.645, .045, .355, 1);\n          transform-origin: 100% 50%;\n          &:before {\n            transform: scale(.6);\n            display: inline-block;\n            vertical-align: -3px;\n          }\n          &:hover {\n            background-color: #b4bccc;\n            color: #fff;\n          }\n        }\n      }\n    }\n\n    .contextmenu {\n      margin: 0;\n      background: #fff;\n      z-index: 3000;\n      position: absolute;\n      list-style-type: none;\n      padding: 5px 0;\n      border-radius: 4px;\n      font-size: 12px;\n      font-weight: 400;\n      color: #333;\n      box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, .3);\n      li {\n        margin: 0;\n        padding: 7px 16px;\n        cursor: pointer;\n        &:hover {\n          background: #eee;\n        }\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/layout/components/TagsView"}]}